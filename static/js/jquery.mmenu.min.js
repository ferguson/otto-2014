/*	
 *	jQuery mmenu 2.1.0
 *	
 *	Copyright (c) 2013 Fred Heusschen
 *	www.frebsite.nl
 *
 *	Dual licensed under the MIT and GPL licenses.
 *	http://en.wikipedia.org/wiki/MIT_License
 *	http://en.wikipedia.org/wiki/GNU_General_Public_License
 */


(function(a){function n(b){if("string"==typeof b)switch(b){case"top":case"right":case"bottom":case"left":b={position:b}}return"object"!=typeof b&&(b={}),b.addCounters!==void 0&&(a.fn.mmenu.deprecated("addCounters-option","counters.add-option"),b.counters={add:b.addCounters}),b.closeOnClick!==void 0&&(a.fn.mmenu.deprecated("closeOnClick-option","onClick.close-option"),b.onClick={close:b.closeOnClick}),"boolean"==typeof b.onClick?b.onClick={close:b.onClick}:"object"!=typeof b.onClick&&(b.onClick={}),b}function o(b){if("boolean"==typeof b.onClick.delayPageload&&(b.onClick.delayPageload=b.onClick.delayPageload?b.configuration.slideDuration:0),a.fn.mmenu.useOverflowScrollingFallback())switch(b.position){case"top":case"bottom":a.fn.mmenu.debug('position: "'+b.position+'" not possible when using the overflowScrolling-fallback.'),b.position="left"}return b}function p(b,c){return b||(b=a("> "+c.pageNodetype,d),b.length>1&&(b=b.wrapAll("<"+c.pageNodetype+" />").parent()),b.addClass(i.page)),b}function q(b,c,d){return b.is(d.menuNodetype)||(b=a("<"+d.menuNodetype+" />").append(b)),b.prependTo("body").addClass(B("").slice(0,-1)).addClass(B(c)),a("li."+d.selectedClass,b).removeClass(d.selectedClass).addClass(i.selected),a("li."+d.labelClass,b).removeClass(d.labelClass).addClass(i.label),b}function r(b,c,d){b.addClass(B(c)),a("ul ul",b).addClass(i.submenu).each(function(b){var e=a(this),f=e.parent(),g=f.find("> a, > span"),h=f.parent(),j=e.attr("id")||B("s"+d+"-"+b);e.data(k.parent,h),f.data(k.sub,e),e.attr("id",j);var l=a('<a class="'+i.subopen+'" href="#'+j+'" />').insertBefore(g);if(g.is("a")||l.addClass(i.fullsubopen),"horizontal"==c){var j=h.attr("id")||B("p"+d+"-"+b);h.attr("id",j),e.prepend('<li class="'+i.subtitle+'"><a class="'+i.subclose+'" href="#'+j+'">'+g.text()+"</a></li>")}}),"horizontal"==c?(a("li."+i.selected,b).parents("li."+i.selected).removeClass(i.selected).end().each(function(){var b=a(this),c=b.find("> ul");c.length&&(b.parent().addClass(i.subopened).addClass(i.subopening),c.addClass(i.opened))}).parent().addClass(i.opened).parents("ul").addClass(i.subopened).addClass(i.subopening),a("ul."+i.opened,b).length||a("ul",b).not("."+i.submenu).addClass(i.opened),a("ul ul",b).appendTo(b)):a("li."+i.selected,b).addClass(i.opened).parents("."+i.selected).removeClass(i.selected)}function s(b,c){return b||(b=a('<div id="'+i.blocker+'" />').appendTo(d)),A(b,function(){c.trigger(j.close)},!0),b}function t(b,d){if(d.close){var f=a("a",b).not("."+i.subopen).not("."+i.subclose);A(f,function(){var e=a(this),g=e.attr("href");b.trigger(j.close),f.parent().removeClass(i.selected),e.parent().addClass(i.selected),d.blockUI&&"#"!=g.slice(0,1)&&c.addClass(i.blocking),"#"!=g&&setTimeout(function(){window.location.href=g},d.delayPageload)})}}function u(b,c,d){var e=b.attr("id");e&&e.length&&A('a[href="#'+e+'"]',function(){b.trigger(j.toggle)});var e=c.attr("id");e&&e.length&&A('a[href="#'+e+'"]',function(){b.trigger(j.close)}),d?(A(a("a."+i.subopen,b),function(){var b=a(this).parent().data(k.sub);b&&b.trigger(j.open)}),A(a("a."+i.subclose,b),function(){a(this).parent().parent().trigger(j.close)})):A(a("a."+i.subopen,b),function(){var b=a(this).parent().data(k.sub);b&&b.trigger(j.toggle)})}function v(a,d){var f=z();g.not(a).trigger(j.close),e.data(k.style,e.attr("style")||"").data(k.scrollTop,f);var h=0;return b.bind(j.resize,function(){var c=b.width();c!=h&&(h=c,e.width(c))}).trigger(j.resize),b.bind(j.keydown,function(a){return 9==a.keyCode?(a.preventDefault(),!1):void 0}),a.addClass(i.opened),d.configuration.hardwareAcceleration&&c.addClass(i.accelerated),c.addClass(i.opened).addClass(B(d.position)),e.scrollTop(f),setTimeout(function(){a.trigger(j.opening),c.addClass(i.opening),setTimeout(function(){a.trigger(j.opened)},d.configuration.slideDuration)},25),"open"}function w(a,d){return a.trigger(j.closing),c.removeClass(i.opening),b.unbind(j.keydown),setTimeout(function(){a.trigger(j.closed).removeClass(i.opened),c.removeClass(i.opened).removeClass(B(d.position)).removeClass(i.accelerated),e.attr("style",e.data(k.style)),b.unbind(j.resize),h&&h.scrollTop(e.data(k.scrollTop))},d.configuration.slideDuration+25),"close"}function x(a){d.scrollTop(0),c.scrollTop(0),a.removeClass(i.subopening).addClass(i.opened);var e=a.data(k.parent);return e&&e.addClass(i.subopening),"open"}function y(a,b){var c=a.data(k.parent);return c&&c.removeClass(i.subopening),setTimeout(function(){a.removeClass(i.opened)},b.configuration.slideDuration+25),"close"}function z(){return h||(0!=c.scrollTop()?h=c:0!=d.scrollTop()&&(h=d)),h?h.scrollTop():0}function A(b,c,d){"string"==typeof b&&(b=a(b));var e=d?a.fn.mmenu.support.touch?j.touchstart:j.mousedown:j.click;b.bind(e,function(a){a.preventDefault(),a.stopPropagation(),c.call(this,a)})}function B(a){return"mmenu-"+a}function C(){return{page:B("page"),blocker:B("blocker"),blocking:B("blocking"),opened:B("opened"),opening:B("opening"),submenu:B("submenu"),subopen:B("subopen"),fullsubopen:B("fullsubopen"),subclose:B("subclose"),subopened:B("subopened"),subopening:B("subopening"),subtitle:B("subtitle"),selected:B("selected"),label:B("label"),noresult:B("noresult"),noresults:B("noresults"),nosubresult:B("nosubresult"),search:B("search"),counter:B("counter"),accelerated:B("accelerated"),nooverflowscrolling:B("no-overflowscrolling")}}function D(a){return a+".mmenu"}function E(){return{toggle:D("toggle"),open:D("open"),close:D("close"),search:D("search"),reset:D("reset"),keyup:D("keyup"),keydown:D("keydown"),count:D("count"),resize:D("resize"),opening:D("opening"),opened:D("opened"),closing:D("closing"),closed:D("closed"),touchstart:D("touchstart"),mousedown:D("mousedown"),click:D("click")}}function F(a){return"mmenu-"+a}function G(){return{parent:F("parent"),sub:F("sub"),style:F("style"),scrollTop:F("scrollTop")}}var i,j,k,b=null,c=null,d=null,e=null,f=null,g=null,h=null;a.fn.mmenu=function(h){return b||(b=a(window),c=a("html"),d=a("body"),g=a(),i=C(),j=E(),k=G(),a.fn.mmenu.useOverflowScrollingFallback(m)),h=n(h),h=a.extend(!0,{},a.fn.mmenu.defaults,h),h=o(h),this.each(function(){var b=a(this),c=!1,d=h.slidingSubmenus?"horizontal":"vertical";g=g.add(b),l++,e=p(e,h.configuration),f=s(f,b,h.configuration),b=q(b,h.position,h.configuration),r(b,d,l),t(b,h.onClick,h.configuration),u(b,e,h.slidingSubmenus),a.fn.mmenu.counters(b,h.counters,h.configuration),a.fn.mmenu.search(b,h.searchfield);var k=b.find("ul");b.add(k).bind(j.toggle+" "+j.open+" "+j.close,function(a){a.preventDefault(),a.stopPropagation()}),b.bind(j.toggle,function(){return b.triggerHandler(c?j.close:j.open)}).bind(j.open,function(){return c?!1:(c=!0,v(b,h))}).bind(j.close,function(){return c?(c=!1,w(b,h)):!1}),"horizontal"==d?k.bind(j.toggle,function(){return a(this).triggerHandler(j.open)}).bind(j.open,function(){return x(a(this),h)}).bind(j.close,function(){return y(a(this),h)}):k.bind(j.toggle,function(){var c=a(this);return c.triggerHandler(c.parent().hasClass(i.opened)?j.close:j.open)}).bind(j.open,function(){return a(this).parent().addClass(i.opened),"open"}).bind(j.close,function(){return a(this).parent().removeClass(i.opened),"close"})})},a.fn.mmenu.defaults={position:"left",slidingSubmenus:!0,onClick:{close:!0,delayPageload:!0,blockUI:!1},configuration:{hardwareAcceleration:!0,selectedClass:"Selected",labelClass:"Label",counterClass:"Counter",pageNodetype:"div",menuNodetype:"nav",slideDuration:500}},a.fn.mmenu.search=function(b,c){if("boolean"==typeof c?c={add:c,search:c}:"string"==typeof search&&(c={add:!0,search:!0,placeholder:c}),"object"!=typeof c&&(c={}),c=a.extend(!0,{},a.fn.mmenu.search.defaults,c),c.add){var d=a('<div class="'+i.search+'" />').prependTo(b);d.append('<input placeholder="'+c.placeholder+'" type="text" autocomplete="off" />'),c.noResults&&a("ul",b).not("."+i.submenu).append('<li class="'+i.noresults+'">'+c.noResults+"</li>")}if(c.search){var d=a("div."+i.search,b),e=a("input",d),f=a("li."+i.label,b),g=a("em."+i.counter,b),h=a("li",b).not("."+i.subtitle).not("."+i.label).not("."+i.noresults),k="> a";c.showLinksOnly||(k+=", > span"),e.bind(j.keyup,function(){e.trigger(j.search)}),b.bind(j.reset+" "+j.search,function(a){a.preventDefault(),a.stopPropagation()}),b.bind(j.reset,function(){e.val(""),b.trigger(j.search)}),b.bind(j.search,function(c,d){"string"==typeof d?e.val(d):d=e.val().toLowerCase(),h.add(f).addClass(i.noresult),h.each(function(){var b=a(this);a(k,b).text().toLowerCase().indexOf(d)>-1&&b.add(b.prevAll("."+i.label).first()).removeClass(i.noresult)}),a(a("ul."+i.submenu,b).get().reverse()).each(function(){var c=a(this),d=null,e=c.attr("id"),f=c.find("li").not("."+i.subtitle).not("."+i.label).not("."+i.noresult);e&&e.length&&(d=a("a."+i.subopen,b).filter('[href="#'+e+'"]').parent()),f.length?d&&(d.removeClass(i.noresult),d.removeClass(i.nosubresult)):(c.trigger(j.close),d&&d.addClass(i.nosubresult))}),b[h.not("."+i.noresult).length?"removeClass":"addClass"](i.noresults),g.trigger(j.count)})}},a.fn.mmenu.search.defaults={add:!1,search:!0,showLinksOnly:!0,placeholder:"Search",noResults:"No results found."},a.fn.mmenu.counters=function(b,c,d){"boolean"==typeof c&&(c={add:c,count:c}),"object"!=typeof c&&(c={}),c=a.extend(!0,{},a.fn.mmenu.counters.defaults,c),a("em."+d.counterClass,b).removeClass(d.counterClass).addClass(i.counter),c.add&&a("."+i.submenu,b).each(function(){var c=a(this),d=c.attr("id");if(d&&d.length){var e=a('<em class="'+i.counter+'" />'),f=a("a."+i.subopen,b).filter('[href="#'+d+'"]');f.parent().find("em."+i.counter).length||f.before(e)}}),c.count&&a("em."+i.counter,b).each(function(){var c=a(this),d=a("ul"+c.next().attr("href"),b);c.bind(j.count,function(a){a.preventDefault(),a.stopPropagation();var b=d.children().not("."+i.label).not("."+i.subtitle).not("."+i.noresult).not("."+i.noresults);c.html(b.length)})}).trigger(j.count)},a.fn.mmenu.counters.defaults={add:!1,count:!0},a.fn.mmenu.useOverflowScrollingFallback=function(a){return c?("boolean"==typeof a&&c[a?"addClass":"removeClass"](i.nooverflowscrolling),c.hasClass(i.nooverflowscrolling)):(m=a,a)},a.fn.mmenu.support={touch:function(){return"ontouchstart"in window.document}(),overflowscrolling:function(){return"WebkitOverflowScrolling"in window.document.documentElement.style}(),oldAndroid:function(){var a=navigator.userAgent;return a.indexOf("Android")>=0?2.4>parseFloat(a.slice(a.indexOf("Android")+8)):!1}()},a.fn.mmenu.debug=function(a){"undefined"!=typeof console&&console.log!==void 0&&console.log("MMENU: "+a)},a.fn.mmenu.deprecated=function(a,b){"undefined"!=typeof console&&console.warn!==void 0&&console.warn("MMENU: "+a+" is deprecated, use "+b+" instead.")};var l=0,m=a.fn.mmenu.support.touch&&!a.fn.mmenu.support.overflowscrolling})(jQuery);